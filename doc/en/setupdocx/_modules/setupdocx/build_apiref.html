

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>setupdocx.build_apiref &mdash; setupdocx  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.36
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Shortcuts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">SetupDocX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_cockpit.html">apidoc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_apiref_scaled.html">apiref</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_abstract.html">1. Abstract</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_platform_support.html">2. Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_blueprint.html">3. Blueprint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../setuplib_cli.html">4. Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configurations/index.html">5. Configuration Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_documents.html">6. Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_modules.html">7. Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_indices.html">8. Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_resources.html">9. Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">10. Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">11. External References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../index_part_license.html">12. Licenses</a></li>
</ul>
<p class="caption"><span class="caption-text">Application</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../howto/index.html">Howto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">setupdocx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../setupdocx.html">setupdocx</a> &raquo;</li>
        
      <li>setupdocx.build_apiref</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for setupdocx.build_apiref</h1><div class="highlight"><pre>
<span></span><span class="c1">#-*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;Creates extended API reference by *epydoc*.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">import</span> <span class="nn">distutils.cmd</span>
<span class="kn">import</span> <span class="nn">setupdocx</span>
<span class="kn">import</span> <span class="nn">setuplib</span>

<span class="kn">import</span> <span class="nn">yapyutils.files.utilities</span> <span class="k">as</span> <span class="nn">utilities</span> 
<span class="kn">import</span> <span class="nn">yapyutils.files.finder</span> <span class="k">as</span> <span class="nn">finder</span> 
<span class="kn">import</span> <span class="nn">yapyutils.config.capabilities</span>
<span class="kn">import</span> <span class="nn">yapyutils.releases</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;Arno-Can Uestuensoez&#39;</span>
<span class="n">__author_email__</span> <span class="o">=</span> <span class="s1">&#39;acue_sf2@sourceforge.net&#39;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;Artistic-License-2.0 + Forced-Fairplay-Constraints&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (C) 2019 Arno-Can Uestuensoez @Ingenieurbuero Arno-Can Uestuensoez&quot;</span>
<span class="n">__uuid__</span> <span class="o">=</span> <span class="s2">&quot;45167c30-3261-4a38-9de4-d7151348ba48&quot;</span>


<span class="k">class</span> <span class="nc">SetupdocXBuildApirefError</span><span class="p">(</span><span class="n">setupdocx</span><span class="o">.</span><span class="n">SetupDocXError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Error on build apiref.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">SetupdocXBuildApirefSetupError</span><span class="p">(</span><span class="n">SetupdocXBuildApirefError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Erroneous builder tool setup.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<span class="k">class</span> <span class="nc">SetupdocXBuildApirefConfError</span><span class="p">(</span><span class="n">SetupdocXBuildApirefError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Erroneous configuration of templates/styles for the builder .</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>


<div class="viewcode-block" id="BuildApirefX"><a class="viewcode-back" href="../../setupdocx.build_apiref.html#setupdocx.build_apiref.BuildApirefX">[docs]</a><span class="k">class</span> <span class="nc">BuildApirefX</span><span class="p">(</span><span class="n">distutils</span><span class="o">.</span><span class="n">cmd</span><span class="o">.</span><span class="n">Command</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create API reference.&quot;&quot;&quot;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Create API reference.&#39;</span>
    <span class="n">user_options</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s1">&#39;builder=&#39;</span><span class="p">,</span>              <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The builder to be used for the creation of the API reference. &quot;</span>
                                        <span class="s2">&quot;See &#39;--help-builder&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;epydoc&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;builder-path=&#39;</span><span class="p">,</span>         <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The directory path of the builder. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;&lt;SETUPDOCX-PYTHONPATH&gt;/setupdocx/builder/&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;build-dir=&#39;</span><span class="p">,</span>            <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The name of the build directory. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;build/&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;build-reldir=&#39;</span><span class="p">,</span>         <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The name of the relative build subdirectory.&quot;</span>
                                        <span class="s2">&quot; Default: &#39;&lt;builder&gt;/apiref/&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;clean&#39;</span><span class="p">,</span>                 <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Removes the cached previous build. Default: False&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;clean-all&#39;</span><span class="p">,</span>             <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Removes the complete build directory before calling the wrapper. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;&lt;build-dir&gt;/apiref&#39;.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;config-path=&#39;</span><span class="p">,</span>          <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The directory path containing the assigned configurations. &quot;</span>
                                        <span class="s2">&quot;See &#39;--list-templates-std&#39; and &#39;--list-templates&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;config/&lt;builder&gt;/:&lt;docsource&gt;/config/&lt;builder&gt;/&#39;. &quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">,</span>                 <span class="s1">&#39;d&#39;</span><span class="p">,</span>  <span class="s2">&quot;Raises degree of debug traces of current context. Supports repetition. &quot;</span>
                                        <span class="s2">&quot;Each raises the command verbosity level of the context by one.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;docname=&#39;</span><span class="p">,</span>              <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The document output name. &quot;</span>
                                        <span class="s2">&quot;Default: attribute of derived class self.name&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;docsource=&#39;</span><span class="p">,</span>            <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The name of the document source directory. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;docsrc/&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;doctemplate=&#39;</span><span class="p">,</span>          <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The design template to be used. A valid entry within &#39;&lt;config-path&gt;/&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;alabaster&#39;.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;doctype=&#39;</span><span class="p">,</span>              <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The final document type to create. this requires &#39;--gendoc&#39; for activation.&quot;</span>
                                        <span class="s2">&quot;See &#39;--list-doctypes&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;html&#39;, &quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;executable=&#39;</span><span class="p">,</span>           <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The executable called by the wrapper. &quot;</span>
                                        <span class="s2">&quot;Supports relative and absolute file path names. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;epydoc&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;executableopts=&#39;</span><span class="p">,</span>       <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Additional options to be passed to the executable. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;executableopts-reset&#39;</span><span class="p">,</span>  <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Initialize empty options for the called executable. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;False&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;gendoc&#39;</span><span class="p">,</span>                <span class="s1">&#39;r&#39;</span><span class="p">,</span>  <span class="s2">&quot;Create complete API document. The default is to create the &#39;rst&#39; files only. &quot;</span>
                                        <span class="s2">&quot;Default: off&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;indexsrc=&#39;</span><span class="p">,</span>             <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The source file to be copied as &#39;index.rst&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;index.rst&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;list-doctypes&#39;</span><span class="p">,</span>         <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;List of available types of document formats.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;list-metatypes&#39;</span><span class="p">,</span>        <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;List of available types of meta formats.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;list-templates-std&#39;</span><span class="p">,</span>    <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;List provided configuration templates.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;list-templates=&#39;</span><span class="p">,</span>       <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Lists the configuration templates with filter parameter, see manuals. &quot;</span>
                                        <span class="s2">&quot;Online help is evailable by the parameter &#39;list-templates=help&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: same as &#39;--list-templates-std&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;metatype=&#39;</span><span class="p">,</span>             <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The meta document type to create to be added to the document sources. &quot;</span>
                                        <span class="s2">&quot;See &#39;--list-metatypes&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;rst&#39;, &quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;name=&#39;</span><span class="p">,</span>                 <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The name of the package. &quot;</span>
                                        <span class="s2">&quot;Default: attribute of derived class &#39;self.name&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;noexec=&#39;</span><span class="p">,</span>               <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Print the call of the selected level only, do not execute. &quot;</span>
                                        <span class="s2">&quot;The value is an integer, decremented by each level until &#39;0&#39;, &quot;</span>                                        <span class="s2">&quot;which is the level to be printed. &quot;</span>
                                        <span class="s2">&quot;The option is different from he global &#39;--dry-run&#39; options, as it &quot;</span>
                                        <span class="s2">&quot;has to handle multiple call levels of subprocesses.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;quiet&#39;</span><span class="p">,</span>                 <span class="s1">&#39;q&#39;</span><span class="p">,</span>  <span class="s2">&quot;Quiet the current context, resets verbosity of applied context to &#39;0&#39;. &quot;</span>
                                        <span class="s2">&quot;This is the enforced global option, which is the negative option &quot;</span>
                                        <span class="s2">&quot;of &#39;--verbose&#39;. &quot;</span>
                                        <span class="s2">&quot;Default: off&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span>                   <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;If present uses the raw document output from the API generation, &quot;</span>
                                        <span class="s2">&quot;else copies from configuration template. &quot;</span>
                                        <span class="s2">&quot;Default: off&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;srcdir=&#39;</span><span class="p">,</span>               <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Source directory.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;set-release=&#39;</span><span class="p">,</span>          <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The release of the package.&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;set-version=&#39;</span><span class="p">,</span>          <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The version of the package. &quot;</span>
                                        <span class="s2">&quot;Default: attribute of derived class self.distribution.metadata.version&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;wrapper=&#39;</span><span class="p">,</span>              <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;The wrapper called by the builder. &quot;</span>
                                        <span class="s2">&quot;Supports pure file names only. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;call_apiref.sh&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;wrapperopts=&#39;</span><span class="p">,</span>          <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Additional options to be passed to the called wrapper. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;wrapperopts-reset&#39;</span><span class="p">,</span>     <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Drop generated options for the wrapper, does not effect environment. &quot;</span>
                                        <span class="s2">&quot;Default: &#39;False&#39;&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s1">&#39;verbose&#39;</span><span class="p">,</span>               <span class="s1">&#39;v&#39;</span><span class="p">,</span>  <span class="s2">&quot;Raises verbosity of current context. Supports repetition. &quot;</span>
                                        <span class="s2">&quot;Each raises the command verbosity level of the context by one. &quot;</span>
                                        <span class="s2">&quot;The value is defined by the global option defined in &quot;</span>
                                        <span class="s2">&quot;&#39;Distribution&#39;. &quot;</span>
                                        <span class="s2">&quot;Refer to the manuals for the special behaviour when used as &quot;</span>
                                        <span class="s2">&quot;either a global option(start &#39;verbose=1&#39;), &quot;</span>
                                        <span class="s2">&quot;or as a command context option(start &#39;verbose=0&#39;). &quot;</span>
                                        <span class="s2">&quot;Default:=1.&quot;</span><span class="p">),</span>

        <span class="c1">#FIXME:</span>
        <span class="p">(</span><span class="s1">&#39;verbose-ext=&#39;</span><span class="p">,</span>   <span class="s1">&#39;x&#39;</span><span class="p">,</span>   <span class="s2">&quot;verbose for external tools, integer value, higher values raise the level&quot;</span><span class="p">),</span>
        
    <span class="p">]</span>

    <span class="c1">#: The provided capabilities of the builder and it&#39;s components.</span>
    <span class="n">capabilities</span> <span class="o">=</span> <span class="n">yapyutils</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">capabilities</span><span class="o">.</span><span class="n">Capability</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;components&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span>          <span class="s2">&quot;epydoc&quot;</span><span class="p">,</span>         <span class="c1"># adjusted in dependence of the &#39;doctype&#39;</span>
                <span class="s2">&quot;epydoc&quot;</span><span class="p">:</span>           <span class="s2">&quot;epydoc&quot;</span><span class="p">,</span>         <span class="c1"># extract reference</span>
            <span class="p">},</span>
            <span class="s2">&quot;epydoc&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;metatypes&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;html&quot;</span><span class="p">,</span>                           <span class="c1"># html</span>
                <span class="p">],</span>
                <span class="s2">&quot;doctypes&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;html&quot;</span><span class="p">,</span>                           <span class="c1"># html</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">&quot;defaults&quot;</span><span class="p">:</span> <span class="p">{</span>                             <span class="c1"># DEFAULTS: updated by capabilities.json</span>
                <span class="s2">&quot;builder&quot;</span><span class="p">:</span>          <span class="s2">&quot;default&quot;</span><span class="p">,</span>        <span class="c1"># False</span>
                <span class="s2">&quot;builder_path&quot;</span><span class="p">:</span>     <span class="kc">None</span><span class="p">,</span>             <span class="c1"># search(&lt;conf-dir&gt;, &lt;configdir&gt;, &lt;docsrc&gt;/conf)/call_apiref.sh</span>
                <span class="s2">&quot;build_dir&quot;</span><span class="p">:</span>        <span class="s2">&quot;build/&quot;</span><span class="p">,</span>         <span class="c1"># build/</span>
                <span class="s2">&quot;build_reldir&quot;</span><span class="p">:</span>     <span class="s2">&quot;epydoc/apiref/&quot;</span><span class="p">,</span> <span class="c1"># epydoc/apiref/</span>
                <span class="s2">&quot;clean&quot;</span><span class="p">:</span>            <span class="kc">None</span><span class="p">,</span>             <span class="c1"># False</span>
                <span class="s2">&quot;config_path&quot;</span><span class="p">:</span>      <span class="kc">None</span><span class="p">,</span>             <span class="c1"># &lt;docsource&gt;/conf/</span>
                <span class="s2">&quot;docname&quot;</span><span class="p">:</span>          <span class="kc">None</span><span class="p">,</span>             <span class="c1"># attribute of derived class, see self.name</span>
                <span class="s2">&quot;docsource&quot;</span><span class="p">:</span>        <span class="s2">&quot;docsrc/&quot;</span><span class="p">,</span>        <span class="c1"># docsrc/</span>
                <span class="s2">&quot;doctype&quot;</span><span class="p">:</span>          <span class="kc">None</span><span class="p">,</span>             <span class="c1"># html</span>
                <span class="s2">&quot;indexsrc&quot;</span><span class="p">:</span>         <span class="s2">&quot;index.rst&quot;</span><span class="p">,</span>      <span class="c1"># &#39;index.rst&#39;</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span>             <span class="kc">None</span><span class="p">,</span>             <span class="c1"># attribute of derived class, see self.name</span>
                <span class="s2">&quot;release&quot;</span><span class="p">:</span>          <span class="kc">None</span><span class="p">,</span>             <span class="c1"># </span>
                <span class="s2">&quot;srcdir&quot;</span><span class="p">:</span>           <span class="kc">None</span><span class="p">,</span>             <span class="c1"># list/tuple(&lt;name&gt;/,)</span>
                <span class="s2">&quot;template&quot;</span><span class="p">:</span>         <span class="s2">&quot;&quot;</span><span class="p">,</span>               <span class="c1"># default template, default:=alabaster</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span>          <span class="kc">None</span><span class="p">,</span>             <span class="c1"># </span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">)</span>

<div class="viewcode-block" id="BuildApirefX.initialize_options"><a class="viewcode-back" href="../../setupdocx.build_apiref.html#setupdocx.build_apiref.BuildApirefX.initialize_options">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;API of &#39;distutils&#39;.</span>
<span class="sd">        </span>
<span class="sd">        REMARK: verbose and debug are encapsulated/hidden by distutils.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docname</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_doctypes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_metatypes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_templates</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_templates_std</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metatype</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_release</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_version</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">set_builder_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fpname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Initializes the hard-coded static values first, than</span>
<span class="sd">        reads the configuration file - if present - and superposes</span>
<span class="sd">        present values. </span>
<span class="sd">        </span>
<span class="sd">        The configuration file is expected to be located within </span>
<span class="sd">        the builder directory.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            fpname:</span>
<span class="sd">                The file or directory path name of the setup.</span>
<span class="sd">                File path names are treated literally, while</span>
<span class="sd">                directory names are scanned for::</span>

<span class="sd">                    capabilities.&lt;ext&gt;</span>
<span class="sd">                    </span>
<span class="sd">                    ext := (json)</span>
<span class="sd">                    # Current version supports JSON only.</span>
<span class="sd">                </span>
<span class="sd">        Returns:</span>
<span class="sd">            Loaded configutation &#39;capabilities&#39;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SetupdocXBuildApirefSetupError</span>
<span class="sd">            </span>
<span class="sd">            pass-through</span>
<span class="sd">            </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fpname</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fpname</span><span class="p">):</span>
            <span class="c1"># file path name is provided</span>
            
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fpname</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;json&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                    <span class="s2">&quot;Current version supports JSON only, got: &quot;</span> 
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">fpname</span><span class="p">))</span>
                    <span class="p">)</span>
            
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpname</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>  <span class="c1"># load data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
        
        <span class="k">elif</span> <span class="n">fpname</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">fpname</span><span class="p">):</span>
            <span class="c1"># director path is provided</span>
            
            <span class="n">_f</span> <span class="o">=</span> <span class="n">fpname</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;capabilities.json&#39;</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">_f</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                    <span class="s2">&quot;Missing setup file: &quot;</span> 
                    <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">_f</span><span class="p">)</span>
                    <span class="p">)</span>
            
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_f</span><span class="p">)</span> <span class="k">as</span> <span class="n">data_file</span><span class="p">:</span>  <span class="c1"># load data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_file</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                <span class="s2">&quot;Setup of builder requires either a file or a directory: &quot;</span> 
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">fpname</span><span class="p">)</span>
                <span class="p">)</span>


<div class="viewcode-block" id="BuildApirefX.finalize_options"><a class="viewcode-back" href="../../setupdocx.build_apiref.html#setupdocx.build_apiref.BuildApirefX.finalize_options">[docs]</a>    <span class="k">def</span> <span class="nf">finalize_options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;API of &#39;distutils&#39;.</span>

<span class="sd">        Args:</span>
<span class="sd">            none</span>
<span class="sd">                </span>
<span class="sd">        Returns:</span>
<span class="sd">            none</span>

<span class="sd">        Raises:</span>
<span class="sd">            SetupdocXBuildApirefSetupError</span>

<span class="sd">            SetupdocxBuildApirefError</span>

<span class="sd">            pass-through</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># scan for any context-help request - despite the following prepared more detailed</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">list_templates</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_templates</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;help&#39;</span><span class="p">)</span>
            <span class="p">):</span> 
            <span class="n">_help_request</span> <span class="o">=</span> <span class="n">setuplib</span><span class="o">.</span><span class="n">check_for_context_help</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_help_request</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">_help_request</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="c1"># quick-and-dirty hack to resolve the inconsistency of</span>
        <span class="c1"># global and local verbose values of distutils</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># The context option is actually not set by the framework,</span>
            <span class="c1"># instead the global option is reset and intialized to</span>
            <span class="c1"># the number of occurances and passes to the initialization</span>
            <span class="c1"># of the memeber &#39;self.verbose&#39;.</span>
            <span class="c1"># Thus the poll fails, while the value is already set via the framework.</span>
            <span class="c1"># See code distutils.dist.Distribution.</span>
            <span class="c1"># Anyhow...keeping it as a reminder.</span>
            <span class="n">_v_opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">get_option_dict</span><span class="p">(</span><span class="s1">&#39;build_docx&#39;</span><span class="p">)[</span><span class="s1">&#39;verbose&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">_v_opts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># fallback to the slightly erroneous behavior when the interface </span>
            <span class="c1"># of distutils changes</span>
            <span class="k">pass</span>


        <span class="c1"># global and local verbose values of distutils</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># See verbose for description of the global option quiet.</span>
            <span class="c1"># See code distutils.dist.Distribution.</span>
            <span class="n">_q_opts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">get_option_dict</span><span class="p">(</span><span class="s1">&#39;build_docx&#39;</span><span class="p">)[</span><span class="s1">&#39;quiet&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">_q_opts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="c1"># fallback to the slightly erroneous behavior when the interface </span>
            <span class="c1"># of distutils changes</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">pass</span>


        <span class="c1"># debug</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="mi">0</span>


        <span class="c1"># raw</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c1">#</span>
        <span class="c1"># current builder</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="s1">&#39;epydoc&#39;</span>

        <span class="n">attr_searchpath</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="s1">&#39;apiref&#39;</span><span class="p">,)</span>

        <span class="c1">#</span>
        <span class="c1"># user has provided setup directory for builder - so load first new defaults</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span><span class="s1">&#39;Missing --builder-path=&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_builder_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;builder&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_builder_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># validate consistency of current builder and defaults</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;builder&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                <span class="s1">&#39;Inconsistent builder:</span><span class="se">\n</span><span class="s1">builder:  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">defaults: </span><span class="si">%s</span><span class="se">\n\n</span><span class="s1">Check:     </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">),</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;builder&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">)),</span>
                    <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># user provided configuration directory</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">][</span><span class="s1">&#39;defaults&#39;</span><span class="p">][</span><span class="s1">&#39;config_path&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">:</span>
            <span class="c1"># empty - for whatever reason</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="s1">&#39;config&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">+=</span> <span class="n">os</span><span class="o">.</span><span class="n">pathsep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;config&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetupdocXBuildApirefConfError</span><span class="p">(</span>
                <span class="s1">&#39;Missing template path &quot;--config-path=</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">),))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">_oneok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">_onedirok</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                    <span class="n">_onedirok</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span><span class="p">:</span>
                        <span class="n">fp</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fp</span> <span class="o">=</span> <span class="n">f</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span>
                    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">fp</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span> <span class="o">=</span> <span class="n">f</span>
                        <span class="n">_oneok</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">_oneok</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_onedirok</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SetupdocXBuildApirefConfError</span><span class="p">(</span>
                        <span class="s1">&#39;Missing configuration template directory, got &quot;--config-path=</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span><span class="p">(</span> 
                            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">)</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SetupdocXBuildApirefConfError</span><span class="p">(</span>
                        <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">Cannot find configuration template:</span><span class="se">\n</span><span class="s1">&#39;</span> 
                        <span class="s1">&#39;   template name:  </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> 
                        <span class="s1">&#39;   search path:    </span><span class="si">%s</span><span class="se">\n</span><span class="s1">&#39;</span> 
                        <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> 
                        <span class="s1">&#39;Check options &quot;--list-templates-std / --list-templates&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span><span class="p">(</span> 
                            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span><span class="p">),</span>
                            <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">),</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
<span class="c1">#         if self.config_path == None:</span>
<span class="c1">#             self.config_path = self.capabilities(</span>
<span class="c1">#                     &#39;defaults&#39;, &#39;config_path&#39;,</span>
<span class="c1">#                     searchpath=attr_searchpath</span>
<span class="c1">#                 )</span>
<span class="c1">#             if self.config_path == None:</span>
<span class="c1">#                 self.config_path = &#39;config&#39; + os.sep + self.builder</span>
<span class="c1">#                 self.config_path += os.pathsep + os.path.dirname(__file__) + os.sep + &#39;config&#39; + os.sep + self.builder</span>
<span class="c1"># </span>
<span class="c1">#         elif not self.config_path:</span>
<span class="c1">#             raise SetupdocXBuildApirefConfError(</span>
<span class="c1">#                 &#39;Missing --config-path=&#39; + str(self.config_path))</span>
<span class="c1">#         else:</span>
<span class="c1">#             if not os.path.isdir(self.config_path):</span>
<span class="c1">#                 raise SetupdocXBuildApirefConfError(</span>
<span class="c1">#                     &#39;Requires directory, got --config-path=&#39; + str(self.config_path))</span>


        <span class="c1">#</span>
        <span class="c1"># set source directory of document</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;docsource&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span> <span class="o">=</span> <span class="s1">&#39;docsrc&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span><span class="p">:</span>
            <span class="c1"># set directory for pre-edited document components</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docsource</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefError</span><span class="p">(</span><span class="s2">&quot;missing docsrc:&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docsource</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># uses raw output of the called builder - default apiref - only</span>
            <span class="k">pass</span>  <span class="c1"># a reminder...</span>


        <span class="c1">#</span>
        <span class="c1"># show templates</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_templates_std</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">setupdocx</span><span class="o">.</span><span class="n">conf_list</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># maximum depth of subdirectory scan</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># show templates with filters</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_templates</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">_kargs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">_args</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="c1">#     _sep = kargs.get(&#39;separator&#39;, 0)</span>
<span class="c1">#     _sep = re.sub(r&#39;(.*?)[\\\\]{0,1}(?&lt;=[\\\\]);&#39;, r&#39;\1;&#39;, _sep)</span>

            <span class="c1"># mask the suboption separator </span>
<span class="c1">#            for ai in re.split(r&#39;(?&lt;![\\\\]);&#39;, self.list_templates):</span>
            <span class="k">for</span> <span class="n">ai</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(?&lt;![\[]);(?![\]])&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_templates</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">ai</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">_k</span><span class="p">,</span> <span class="n">_v</span> <span class="o">=</span> <span class="n">ai</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">_k</span> <span class="o">==</span> <span class="s1">&#39;baselist&#39;</span><span class="p">:</span>
                            <span class="n">_v</span> <span class="o">=</span> <span class="n">_v</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">pathsep</span><span class="p">)</span>
                        <span class="n">_kargs</span><span class="p">[</span><span class="n">_k</span><span class="p">]</span> <span class="o">=</span> <span class="n">_v</span>
                    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                        <span class="n">_args</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span> <span class="o">+</span> <span class="n">ai</span>

            <span class="k">if</span> <span class="n">_args</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;,help&#39;</span><span class="p">):</span>
                <span class="n">_h</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">Supports the keyword arguments of &#39;setupdocx.conf_list&#39;.</span>

<span class="s2">The keyword parameter &#39;filter&#39; could be replaced by a comma separated</span>
<span class="s2">list of arguments to be assembled into a filter rule.</span>

<span class="s2">*args=&lt;list-of-OR-parts-python-re-expression&gt;*</span>
<span class="s2">  Example::</span>

<span class="s2">    input:</span>
<span class="s2">       args := &#39;agogo,alabas.*&#39;</span>

<span class="s2">    rule:</span>
<span class="s2">       args-rule := &#39;(agogo|alabas.*)&#39;</span>

<span class="s2">*filter=&lt;python-re-expression&gt;*</span>

<span class="s2">    input:</span>
<span class="s2">       filter := &#39;filter=(agogo|alabas.*)&#39;</span>

<span class="s2">    rule:</span>
<span class="s2">       args-rule := &#39;(agogo|alabas.*)&#39;</span>
<span class="s2"> </span>
<span class="s2">The keyword parameter &#39;filter&#39; provides for a wider range of rule syntaxes, </span>
<span class="s2">while the &#39;args&#39; list offers simplicity for casual calls.</span>

<span class="s2">The call without parameters is the same as the option &#39;--list-templates-std&#39;. </span>
<span class="s2">The &#39;setupdocx.conf_list&#39; parameters provided for the user interface are:</span>

<span class="s2">    setupdocx.conf_list</span>
<span class="s2">    ===================</span>

<span class="s2">    &quot;&quot;&quot;</span>
                <span class="c1"># help(setupdocx.conf_list)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">_h</span> <span class="o">+</span> <span class="n">setupdocx</span><span class="o">.</span><span class="n">conf_list</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                
            <span class="n">_filters</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">_args</span><span class="p">:</span>
                <span class="n">_filters</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">_args</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">]</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_filters</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">_filter</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_filters</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">_filter</span> <span class="o">=</span> <span class="n">_filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="s1">&#39;filter&#39;</span> <span class="ow">in</span> <span class="n">_kargs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_filters</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">SetupdocXBuildApirefError</span><span class="p">(</span>
                        <span class="s2">&quot;Filters could be provided either by args as a comma separated list &quot;</span>
                        <span class="s2">&quot;of partial &#39;re&#39; rules internallz converted to a single rule, &quot;</span>
                        <span class="s2">&quot;or by the &#39;filters=&#39; option as a single final Python-regular &quot;</span>
                        <span class="s2">&quot;expression. The resulting rule is compiled by &#39;re.compile()&#39;. &quot;</span>
                        <span class="s2">&quot;Got:</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="s2">&quot;   args:    </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="s2">&quot;   filters: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">_filters</span><span class="p">),</span>
                            <span class="nb">str</span><span class="p">(</span><span class="n">_kargs</span><span class="p">[</span><span class="s1">&#39;filter&#39;</span><span class="p">]),</span>
                            <span class="p">)</span>
                        <span class="p">)</span>

<span class="c1">#                _filter_re = re.compile(_kargs[&#39;filter&#39;])</span>

<span class="c1">#             if not _filters:</span>
<span class="c1">#                 _filter_re =  None</span>
                
            <span class="c1">#</span>
            <span class="c1"># show templates</span>
            <span class="c1">#</span>
            <span class="k">if</span> <span class="n">_kargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;depth&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">setupdocx</span><span class="o">.</span><span class="n">conf_list</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="o">**</span><span class="n">_kargs</span><span class="p">)</span>  <span class="c1"># show a bit more than top-level - for new users</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#             elif str(_kargs.get(&#39;depth&#39;)) == &#39;0&#39;:</span>
<span class="c1">#                 _kargs.pop(&#39;depth&#39;)</span>

            <span class="n">setupdocx</span><span class="o">.</span><span class="n">conf_list</span><span class="p">(</span><span class="o">**</span><span class="n">_kargs</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1">#         #</span>
<span class="c1">#         # show templates with filters</span>
<span class="c1">#         #</span>
<span class="c1">#         if self.list_templates != None:</span>
<span class="c1">#             _kargs = {}</span>
<span class="c1">#             _args = &#39;&#39;</span>
<span class="c1"># </span>
<span class="c1"># #     _sep = kargs.get(&#39;separator&#39;, 0)</span>
<span class="c1"># #     _sep = re.sub(r&#39;(.*?)[\\\\]{0,1}(?&lt;=[\\\\]);&#39;, r&#39;\1;&#39;, _sep)</span>
<span class="c1"># </span>
<span class="c1">#             # mask the suboption separator </span>
<span class="c1"># #            for ai in re.split(r&#39;(?&lt;![\\\\]);&#39;, self.list_templates):</span>
<span class="c1">#             for ai in re.split(r&#39;(?&lt;![\[]);(?![\]])&#39;, self.list_templates):</span>
<span class="c1">#                 if ai:</span>
<span class="c1">#                     try:</span>
<span class="c1">#                         _k, _v = ai.split(&#39;=&#39;)</span>
<span class="c1">#                         if _k == &#39;baselist&#39;:</span>
<span class="c1">#                             _v = _v.split(os.pathsep)</span>
<span class="c1">#                         _kargs[_k] = _v</span>
<span class="c1">#                     except ValueError:</span>
<span class="c1">#                         # sort out some options without value</span>
<span class="c1">#                         if ai == &#39;all&#39;:</span>
<span class="c1">#                             # list empty builder too</span>
<span class="c1">#                             _kargs[&#39;all&#39;] = True</span>
<span class="c1">#                         </span>
<span class="c1">#                         # add arguments</span>
<span class="c1">#                         else:</span>
<span class="c1">#                             _args += &#39;,&#39; + ai</span>
<span class="c1"># </span>
<span class="c1">#             if _args.endswith(&#39;,help&#39;):</span>
<span class="c1">#                 _h = &quot;&quot;&quot;</span>
<span class="c1"># Supports the keyword arguments of &#39;setupdocx.conf_list&#39;.</span>
<span class="c1"># </span>
<span class="c1"># The keyword parameter &#39;filter&#39; could be replaced by a comma separated</span>
<span class="c1"># list of arguments to be assembled into a filter rule.</span>
<span class="c1"># </span>
<span class="c1"># *args=&lt;list-of-OR-parts-python-re-expression&gt;*</span>
<span class="c1">#   Example::</span>
<span class="c1"># </span>
<span class="c1">#     input:</span>
<span class="c1">#        args := &#39;agogo,alabas.*&#39;</span>
<span class="c1"># </span>
<span class="c1">#     rule:</span>
<span class="c1">#        args-rule := &#39;(agogo|alabas.*)&#39;</span>
<span class="c1"># </span>
<span class="c1"># *filter=&lt;python-re-expression&gt;*</span>
<span class="c1"># </span>
<span class="c1">#     input:</span>
<span class="c1">#        filter := &#39;filter=(agogo|alabas.*)&#39;</span>
<span class="c1"># </span>
<span class="c1">#     rule:</span>
<span class="c1">#        args-rule := &#39;(agogo|alabas.*)&#39;</span>
<span class="c1">#  </span>
<span class="c1"># The keyword parameter &#39;filter&#39; provides for a wider range of rule syntaxes, </span>
<span class="c1"># while the &#39;args&#39; list offers simplicity for casual calls.</span>
<span class="c1"># </span>
<span class="c1"># The call without parameters is the same as the option &#39;--list-templates-std&#39;. </span>
<span class="c1"># The &#39;setupdocx.conf_list&#39; parameters provided for the user interface are:</span>
<span class="c1"># </span>
<span class="c1">#     setupdocx.conf_list</span>
<span class="c1">#     ===================</span>
<span class="c1"># </span>
<span class="c1">#     &quot;&quot;&quot;</span>
<span class="c1">#                 # help(setupdocx.conf_list)</span>
<span class="c1">#                 print(_h + setupdocx.conf_list.__doc__)</span>
<span class="c1">#                 sys.exit(0)</span>
<span class="c1">#                 </span>
<span class="c1">#             _filters = None</span>
<span class="c1">#             if _args:</span>
<span class="c1">#                 _filters = [x for x in _args.split(&#39;,&#39;) if x]</span>
<span class="c1">#                 if len(_filters) &gt; 1:</span>
<span class="c1">#                     _filter = &#39;(&#39; + &#39;|&#39;.join(_filters) + &#39;)&#39;</span>
<span class="c1">#                 else:</span>
<span class="c1">#                     _filter = _filters[0]</span>
<span class="c1"># </span>
<span class="c1">#             if &#39;filter&#39; in _kargs:</span>
<span class="c1">#                 if _filters:</span>
<span class="c1">#                     raise SetupdocxBuildApirefError(</span>
<span class="c1">#                         &quot;Filters could be provided either by args as a comma separated list &quot;</span>
<span class="c1">#                         &quot;of partial &#39;re&#39; rules internallz converted to a single rule, &quot;</span>
<span class="c1">#                         &quot;or by the &#39;filters=&#39; option as a single final Python-regular &quot;</span>
<span class="c1">#                         &quot;expression. The resulting rule is compiled by &#39;re.compile()&#39;. &quot;</span>
<span class="c1">#                         &quot;Got:\n&quot;</span>
<span class="c1">#                         &quot;   args:    %s\n&quot;</span>
<span class="c1">#                         &quot;   filters: %s\n&quot; % (</span>
<span class="c1">#                             str(_filters),</span>
<span class="c1">#                             str(_kargs[&#39;filter&#39;]),</span>
<span class="c1">#                             )</span>
<span class="c1">#                         )</span>
<span class="c1">#             elif _filters:</span>
<span class="c1">#                 _kargs[&#39;filter&#39;] = _filter</span>
<span class="c1"># </span>
<span class="c1"># #                _filter_re = re.compile(_kargs[&#39;filter&#39;])</span>
<span class="c1"># </span>
<span class="c1"># #             if not _filters:</span>
<span class="c1"># #                 _filter_re =  None</span>
<span class="c1">#                 </span>
<span class="c1">#             setupdocx.conf_list([self.config_path], **_kargs)</span>
<span class="c1">#             sys.exit(0)</span>


        <span class="c1">#</span>
        <span class="c1"># show doctypes</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_doctypes</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Known document types for API only documentation. These are activated by &#39;--gendoc&#39;:&quot;</span>
                <span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>

            <span class="n">_dtypes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;doctypes&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">))[:]</span>
            <span class="k">for</span> <span class="n">_dt</span> <span class="ow">in</span> <span class="n">_dtypes</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  </span><span class="si">{dtype:&lt;20}</span><span class="s2"> --doctype=</span><span class="si">{dtype}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">_dt</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Note: For metaformats refer to &#39;--list-metatypes&#39;.&quot;</span>
                <span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
                
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># show metatypes</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_metatypes</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Known meta types for documents:&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="n">_mtypes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;metatypes&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">))[:]</span>
            <span class="k">for</span> <span class="n">_mt</span> <span class="ow">in</span> <span class="n">_mtypes</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  </span><span class="si">{mtype:&lt;20}</span><span class="s2"> --metatype=</span><span class="si">{mtype}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtype</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">_mt</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Note: For docformats of API only documentation refer to &#39;--list-doctypes&#39;.&quot;</span>
                <span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>
                
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># common top of build directory for output</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;build_dir&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="s1">&#39;build&#39;</span>


        <span class="c1">#</span>
        <span class="c1"># subdirectory of build for output</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;build_reldir&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span> <span class="o">=</span> <span class="s1">&#39;epydoc/apiref/&#39;</span>

        <span class="c1"># the complete path for the assembled document sources to be processed </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># clean-all - removes complete build subdirectory</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># self.clean_all = self.capabilities.data[self.builder][&#39;apiref&#39;][&#39;defaults&#39;][&#39;clean-all&#39;]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;clean_all&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">=</span>  <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1">#</span>
        <span class="c1"># clean - removes pre-artifacts</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;clean&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clean</span> <span class="o">=</span> <span class="mi">1</span>


        <span class="c1">#</span>
        <span class="c1"># raw output from the executed tool only, e.g. epydoc</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span> <span class="o">=</span> <span class="mi">1</span>


        <span class="c1">#</span>
        <span class="c1"># name - from metadata</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
<span class="c1">#            self.name = self.distribution.metadata.name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;-apiref&#39;</span>


        <span class="c1">#</span>
        <span class="c1"># document name - default from metadata</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docname</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">docname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;docname&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">docname</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">docname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>


        <span class="c1">#</span>
        <span class="c1"># document template to be used</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;template&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span><span class="p">:</span>
            <span class="c1"># final default</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># default:=alabaster</span>


        <span class="c1">#</span>
        <span class="c1"># document type to be created</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;doctype&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span><span class="p">:</span>
            <span class="c1"># final default</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="s1">&#39;html&#39;</span>
        <span class="c1"># some alias</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">==</span> <span class="s1">&#39;pdf&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> <span class="o">=</span> <span class="s1">&#39;latexpdf&#39;</span>

        <span class="c1">#</span>
        <span class="c1"># custom index file appropriate to the doctype option,</span>
        <span class="c1"># in case of e.g. &#39;builder=epydoc&#39; =&gt; &#39;indexsrc=rst&#39; </span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;indexsrc&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>


        <span class="c1">#</span>
        <span class="c1"># directory containing the source code</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;srcdir&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span><span class="p">)</span> <span class="ow">is</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">,):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span> <span class="o">=</span> <span class="s1">&#39;;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># do not execute - just display call</span>
        <span class="c1"># effects top-level only</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noexec</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">verbose0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> 

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug0</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">debug0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> 



        <span class="c1">#</span>
        <span class="c1"># executable - default is sphinx-apiref</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span><span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;executable&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="s1">&#39;sphinx-apiref&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                    <span class="s2">&quot;Requires executable: --executable&quot;</span>
                    <span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># executableopts_reset - reset options before adding new options</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;executableopts_reset&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span> <span class="o">=</span> <span class="mi">1</span>


        <span class="c1">#</span>
        <span class="c1"># executableopts - additional options to be passed to executable</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;executableopts&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>


        <span class="c1">#</span>
        <span class="c1"># wrapper - default is call_apiref.sh</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;wrapper&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">=</span> <span class="s1">&#39;call_apiref.sh&#39;</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SetupdocXBuildApirefSetupError</span><span class="p">(</span>
                    <span class="s2">&quot;Requires wrapper: --wrapper&quot;</span>
                    <span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># wrapperopts - additional options to be passed to wrapper</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;wrapperopts_reset&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span> 
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#</span>
            <span class="c1"># wrapperopts - additional options to be passed to executable</span>
            <span class="c1">#</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">(</span>
                    <span class="s1">&#39;defaults&#39;</span><span class="p">,</span> <span class="s1">&#39;wrapperopts&#39;</span><span class="p">,</span> <span class="n">searchpath</span><span class="o">=</span><span class="n">attr_searchpath</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>


        <span class="c1">#</span>
        <span class="c1"># set version of document</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_version</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">version</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span>
                    <span class="s2">&quot;WARNING: Cannot readout the version, requires either call option &#39;--version&#39;, &quot;</span>
                    <span class="s2">&quot;or stored configuration data.</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">yapyutils</span><span class="o">.</span><span class="n">releases</span><span class="o">.</span><span class="n">get_version_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_version</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># set release of document</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_release</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_release</span> 


        <span class="bp">self</span><span class="o">.</span><span class="n">builddate</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y.%m.</span><span class="si">%d</span><span class="s2">-%H:%M&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">author</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">license</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">license</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">description</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">copyright</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">copyright</span> <span class="o">=</span> <span class="s2">&quot;(C)</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">))</span> 
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copyright</span> <span class="o">=</span> <span class="s2">&quot;(C)</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">())),</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">author</span><span class="p">))</span> 

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Unknown&quot;</span> 
                <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Status is not set: Unknown</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="s2">&quot;Missing&quot;</span> 
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;Status is not defined: Missing</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># the complete path for the final document</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_out_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">+</span> <span class="s2">&quot;/doc/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docname</span><span class="p">))</span></div>

<div class="viewcode-block" id="BuildApirefX.run"><a class="viewcode-back" href="../../setupdocx.build_apiref.html#setupdocx.build_apiref.BuildApirefX.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates documents.</span>
<span class="sd">        Calls the defined and activated wrapper scripts.</span>
<span class="sd">        The call flow could be customized by various </span>
<span class="sd">        interfaces. ::</span>
<span class="sd">        </span>
<span class="sd">                I.      self.set_environment()    # could be superposed by derived class</span>
<span class="sd">                II.     self.call_prologue()       # could be superposed by derived class </span>
<span class="sd">                III.    subprocesses:</span>
<span class="sd">                    1.    builder_path.sh          # could be arbitrary custom call wrapper</span>
<span class="sd">                    2.    build_docx.sh            # could be arbitrary custom call wrapper</span>
<span class="sd">                    3.    build_apiref.sh          # could be arbitrary custom call wrapper</span>
<span class="sd">                IV.     self.call_epilogue()       # could be superposed by derived class</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># clean</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_all</span><span class="p">:</span>
            <span class="c1"># clean the complete build directory</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shutil.rmtree(</span><span class="si">%s</span><span class="s1">, True)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">))</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">:</span>
            <span class="c1"># clean build directory of apiref - build/&lt;builder&gt;/apiref</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shutil.rmtree(</span><span class="si">%s</span><span class="s1">, True)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">))</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>


        <span class="c1"># create when missing</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">SetupdocXBuildApirefError</span><span class="p">(</span>
                <span class="s2">&quot;File present with target dirname: &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">)</span>
                <span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># call string of apiref wrapper for subprocess</span>
        <span class="c1">#</span>
        <span class="n">command_apiref</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span><span class="p">:</span>
            <span class="n">command_apiref</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">command_apiref</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;skip : builder_path</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">command_apiref</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">==</span> <span class="mi">1</span>  <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Capabilities: &quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   capabilities  = &quot;</span> 
                  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;capabilities.json&#39;</span><span class="p">))</span>
             
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Scripts: &quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   builder_path  = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder_path</span><span class="p">))</span>

            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Calls: &quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   &quot;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_apiref</span><span class="p">))</span>
                 
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Configuration path: &quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   config_path   = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">)))</span>

            <span class="nb">print</span><span class="p">()</span>
 
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


        <span class="c1">#</span>
        <span class="c1"># decrement counter for passing to the next level</span>
        <span class="c1">#</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="o">-=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">call_prologue</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Calling wrapper &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_apiref</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">()</span>
        <span class="n">exit_code</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_apiref</span><span class="p">))</span> <span class="c1"># create apiref</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Finished: </span><span class="si">%s</span><span class="s2"> =&gt; exit=</span><span class="si">%s</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">command_apiref</span><span class="p">)),</span> <span class="nb">str</span><span class="p">(</span><span class="n">exit_code</span><span class="p">)))</span>
            <span class="nb">print</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">call_epilogue</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">set_environment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the specific environment variables for the subprocess.</span>
<span class="sd">        In addition writes source files of the environment for the </span>
<span class="sd">        manual command line start.</span>
<span class="sd">        </span>
<span class="sd">        The defined variables represent the interface to the wrapper calls,</span>
<span class="sd">        so no modification of the provided environment is permitted. When</span>
<span class="sd">        additional information is required do not forget to call this method.  </span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># set parameter via environ</span>
        <span class="c1">#</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_AUTHOR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDRELDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CLEAN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CONFIGPATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_path</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_COPYRIGHT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copyright</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DEBUG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug0</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCNAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">docname</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCSRC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">docsource</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTEMPLATE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doctype</span> 
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EMBED&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span> 
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXEC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS_RESET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_GENDOC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_INDEXSRC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LIB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LICENSE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_MISSION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NAME&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NOEXEC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noexec</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_QUIET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RAWDOC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_SRCDIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_STATUS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERBOSE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose0</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPER&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS_RESET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span><span class="p">)</span>

        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERSION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_release</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RELEASE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">release</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RELEASE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">noexec</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;build_apiref:Call environment parameters:&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_AUTHOR             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_AUTHOR&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_BUILDDIR           = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_BUILDER            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_BUILDRELDIR        = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_reldir</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_CLEAN              = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">clean</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_CONFIGPATH         = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_path</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_COPYRIGHT          = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">copyright</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_DEBUG              = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">debug0</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_DOCNAME            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docname</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_DOCSRC             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">docsource</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_DOCTEMPLATE        = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doctemplate</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_DOCTYPE            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">doctype</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_EMBED              = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EMBED&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_EXEC               = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_EXECOPTS           = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executableopts</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_EXECOPTS_RESET     = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executableopts_reset</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_GENDOC             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_INDEXSRC           = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">indexsrc</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_LIB                = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LIB&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_LICENSE            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LICENSE&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_MISSION            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_MISSION&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_NAME               = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_NOEXEC             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noexec</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_QUIET              = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_RAWDOC             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_RELEASE            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">release</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_SRCDIR             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">srcdir</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_STATUS             = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_STATUS&#39;</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_VERBOSE            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">verbose0</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_VERSION            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_WRAPPER            = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapper</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_WRAPPEROPTS        = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   DOCX_WRAPPEROPTS_RESET  = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wrapperopts_reset</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">()</span>
            
    <span class="k">def</span> <span class="nf">write_environment_setter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Writes the environment previously set by &#39;self.set_environment&#39;</span>
<span class="sd">        into shell scripts to be optionally sourced when the wrapper is</span>
<span class="sd">        manually called from the command line.</span>
<span class="sd">        </span>
<span class="sd">        ATTENTION: &#39;self.set_environment&#39; must be called before.</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">_fpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;setenv.sh&#39;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_fpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_f</span><span class="p">:</span>
            <span class="n">_f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s1">&#39;DOCX_AUTHOR=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_AUTHOR&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_AUTHOR;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_BUILDDIR=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDDIR&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_BUILDDIR;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_BUILDER=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDER&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_BUILDER;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_BUILDRELDIR=&quot;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDRELDIR&#39;</span><span class="p">]</span>         <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_BUILDRELDIR;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_CLEAN=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CLEAN&#39;</span><span class="p">]</span>               <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_CLEAN&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_CONFIGPATH=&quot;&#39;</span>         <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CONFIGPATH&#39;</span><span class="p">]</span>          <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_CONFIGPATH&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_COPYRIGHT=&quot;&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_COPYRIGHT&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_COPYRIGHT;&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_DEBUG=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DEBUG&#39;</span><span class="p">]</span>               <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_DEBUG&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_DOCNAME=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCNAME&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_DOCNAME&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_DOCSRC=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCSRC&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_DOCSRC&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_DOCTEMPLATE=&quot;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTEMPLATE&#39;</span><span class="p">]</span>         <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_DOCTEMPLATE;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_DOCTYPE=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTYPE&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_DOCTYPE&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_EMBED=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EMBED&#39;</span><span class="p">]</span>               <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_EMBED&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_EXEC=&quot;&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXEC&#39;</span><span class="p">]</span>                <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_EXEC&#39;</span>                <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_EXECOPTS=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_EXECOPTS&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_EXECOPTS_RESET=&quot;&#39;</span>     <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS_RESET&#39;</span><span class="p">]</span>      <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_EXECOPTS_RESET&#39;</span>      <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_GENDOC=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_GENDOC&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_GENDOC&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_INDEXSRC=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_INDEXSRC&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_INDEXSRC&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_LIB=&quot;&#39;</span>                <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LIB&#39;</span><span class="p">]</span>                 <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_LIB&#39;</span>                 <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_LICENSE=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LICENSE&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_LICENSE;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_MISSION=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_MISSION&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_MISSION;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_NAME=&quot;&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NAME&#39;</span><span class="p">]</span>                <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_NAME&#39;</span>                <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_NOEXEC=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NOEXEC&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_NOEXEC&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_QUIET=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_QUIET&#39;</span><span class="p">]</span>               <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_QUIET&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_RAWDOC=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RAWDOC&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_RAWDOC&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_RELEASE=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RELEASE&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_RELEASE&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_SRCDIR=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_SRCDIR&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_SRCDIR&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_STATUS=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_STATUS&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_STATUS;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_VERBOSE=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERBOSE&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_VERBOSE&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_VERSION=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERSION&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_VERSION&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_WRAPPER=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPER&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_WRAPPER&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_WRAPPEROPTS=&quot;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS&#39;</span><span class="p">]</span>         <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_WRAPPEROPTS&#39;</span>         <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;DOCX_WRAPPEROPTS_RESET=&quot;&#39;</span>  <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS_RESET&#39;</span><span class="p">]</span>   <span class="o">+</span> <span class="s1">&#39;&quot;; export DOCX_WRAPPEROPTS_RESET&#39;</span>   <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="n">_fpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;setenv.bat&#39;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_fpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_f</span><span class="p">:</span>
            <span class="n">_f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="s1">&#39;set DOCX_AUTHOR=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_AUTHOR&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_BUILDDIR=&quot;&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDDIR&#39;</span><span class="p">]</span>          <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_BUILDER=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDER&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_BUILDRELDIR=&quot;&#39;</span>       <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_BUILDRELDIR&#39;</span><span class="p">]</span>       <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_CLEAN=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CLEAN&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_CONFIGPATH=&quot;&#39;</span>        <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_CONFIGPATH&#39;</span><span class="p">]</span>        <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_COPYRIGHT=&quot;&#39;</span>         <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_COPYRIGHT&#39;</span><span class="p">]</span>         <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_DEBUG=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DEBUG&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_DOCNAME=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCNAME&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_DOCSRC=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCSRC&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_DOCTEMPLATE=&quot;&#39;</span>       <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTEMPLATE&#39;</span><span class="p">]</span>       <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_DOCTYPE=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_DOCTYPE&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_EMBED=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EMBED&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_EXEC=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXEC&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_EXECOPTS=&quot;&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS&#39;</span><span class="p">]</span>          <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_EXECOPTS_RESET=&quot;&#39;</span>    <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_EXECOPTS_RESET&#39;</span><span class="p">]</span>    <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_GENDOC=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_GENDOC&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_INDEXSRC=&quot;&#39;</span>          <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_INDEXSRC&#39;</span><span class="p">]</span>          <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_LIB=&quot;&#39;</span>               <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LIB&#39;</span><span class="p">]</span>               <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_LICENSE=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_LICENSE&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_MISSION=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_MISSION&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_NAME=&quot;&#39;</span>              <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NAME&#39;</span><span class="p">]</span>              <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_NOEXEC=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_NOEXEC&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_QUIET=&quot;&#39;</span>             <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_QUIET&#39;</span><span class="p">]</span>             <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_RAWDOC=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RAWDOC&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_RELEASE=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_RELEASE&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_SRCDIR=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_SRCDIR&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_STATUS=&quot;&#39;</span>            <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_STATUS&#39;</span><span class="p">]</span>            <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_VERBOSE=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERBOSE&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_VERSION=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_VERSION&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_WRAPPER=&quot;&#39;</span>           <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPER&#39;</span><span class="p">]</span>           <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_WRAPPEROPTS=&quot;&#39;</span>       <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS&#39;</span><span class="p">]</span>       <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="s1">&#39;set DOCX_WRAPPEROPTS_RESET=&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;DOCX_WRAPPEROPTS_RESET&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">call_prologue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executed before the call of the wrapper. </span>
<span class="sd">        </span>
<span class="sd">        The default version supports *Sphinx* and writes the project </span>
<span class="sd">        data into the file &#39;&lt;build-dir&gt;/&lt;build-reldir&gt;/project.rst&#39;.</span>
<span class="sd">        Replace this method in the derived class as required. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#</span>
        <span class="c1"># set environment for wrapper</span>
        <span class="c1">#</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_environment</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gendoc</span><span class="p">:</span>        
            <span class="c1">#</span>
            <span class="c1"># write project data into &#39;project.rst&#39;</span>
            <span class="c1">#</span>
            <span class="n">_fpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_doc_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s1">&#39;project.rst&#39;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_fpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_f</span><span class="p">:</span>
                <span class="n">_f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="s1">&#39;**Product Data**&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* MISSION=&#39;</span>       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* AUTHOR=&#39;</span>        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* PROJECT=&#39;</span>       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* COPYRIGHT=&#39;</span>     <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">copyright</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* LICENSE=&#39;</span>       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">license</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* VERSION=&#39;</span>       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* RELEASE=&#39;</span>       <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">release</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* STATUS=&#39;</span>        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">status</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="s1">&#39;* BUILDDATE=&#39;</span>     <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">builddate</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
            
            <span class="c1">#</span>
            <span class="c1"># write environment data scripts command line application.</span>
            <span class="c1">#</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_environment_setter</span><span class="p">()</span>
            
    
    <span class="k">def</span> <span class="nf">call_epilogue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Executed after the call of the wrapper. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright (C) 2016 Arno-Can Uestuensoez @Ingenieurbuero Arno-Can Uestuensoez
      <span class="lastupdated">
        Last updated on Dec 11, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>